{
  "format_version": "1.2",
  "terraform_version": "1.7.4",
  "variables": {
    "account_id": {
      "value": "901872380504"
    },
    "project_name": {
      "value": "Email OTP Bridge"
    },
    "project_prefix": {
      "value": "eotb"
    },
    "region": {
      "value": "eu-west-1"
    },
    "tags": {
      "value": {}
    },
    "workmail_organization_id": {
      "value": "m-082f7c51940642c088f316c79b86ca88"
    }
  },
  "planned_values": {
    "root_module": {
      "child_modules": [
        {
          "resources": [
            {
              "address": "module.aim_policy[\"WorkMailFlowsRead\"].aws_iam_policy.main",
              "mode": "managed",
              "type": "aws_iam_policy",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                "description": "Policy for reading work mail flows",
                "id": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                "name": "eotb-WorkMailFlowsRead",
                "name_prefix": "",
                "path": "/",
                "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowLambdaAccessCloudWatchLogs\"},{\"Action\":[\"workmailmessageflow:GetRawMessageContent\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowReadWorkMailFlows\"}],\"Version\":\"2012-10-17\"}",
                "policy_id": "ANPA5D66INJMKTKRYMF67",
                "tags": {},
                "tags_all": {
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            }
          ],
          "address": "module.aim_policy[\"WorkMailFlowsRead\"]"
        },
        {
          "resources": [
            {
              "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role.main",
              "mode": "managed",
              "type": "aws_iam_role",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"LambdaRole\"}],\"Version\":\"2012-10-17\"}",
                "create_date": "2024-08-26T10:08:10Z",
                "description": "Role accessing work mail flows from lambdas",
                "force_detach_policies": false,
                "id": "eotb-WorkMailFlowsRead",
                "inline_policy": [],
                "managed_policy_arns": [
                  "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead"
                ],
                "max_session_duration": 3600,
                "name": "eotb-WorkMailFlowsRead",
                "name_prefix": "",
                "path": "/",
                "permissions_boundary": null,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "aim-role-policy"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "aim-role-policy",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "unique_id": "AROA5D66INJMCIBB4ZGWE"
              },
              "sensitive_values": {
                "inline_policy": [],
                "managed_policy_arns": [
                  false
                ],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role_policy_attachment.main[\"WorkMailFlowsRead\"]",
              "mode": "managed",
              "type": "aws_iam_role_policy_attachment",
              "name": "main",
              "index": "WorkMailFlowsRead",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "id": "eotb-WorkMailFlowsRead-20240826105037319500000001",
                "policy_arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                "role": "eotb-WorkMailFlowsRead"
              },
              "sensitive_values": {}
            }
          ],
          "address": "module.aim_role_policy[\"WorkMailFlowsRead\"]"
        },
        {
          "resources": [
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_api_key.main[\"singleton\"]",
              "mode": "managed",
              "type": "aws_api_gateway_api_key",
              "name": "main",
              "index": "singleton",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:apigateway:eu-west-1::/apikeys/2a7y5mau56",
                "created_date": "2024-08-26T10:08:38Z",
                "customer_id": "",
                "description": "Managed by Terraform",
                "enabled": true,
                "id": "2a7y5mau56",
                "last_updated_date": "2024-08-26T10:08:38Z",
                "name": "eotb-backend-api-apikey",
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_deployment.main",
              "mode": "managed",
              "type": "aws_api_gateway_deployment",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "created_date": "2024-08-26T10:08:40Z",
                "description": "",
                "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/",
                "id": "p7igd5",
                "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/",
                "rest_api_id": "q5p2ozkn5e",
                "stage_description": null,
                "stage_name": null,
                "triggers": {
                  "redeployment": "c628daa9026c9aa8fa56c048b2d56fa2a3b54375"
                },
                "variables": null
              },
              "sensitive_values": {
                "triggers": {}
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_rest_api.main",
              "mode": "managed",
              "type": "aws_api_gateway_rest_api",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "api_key_source": "HEADER",
                "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e",
                "binary_media_types": [],
                "body": "openapi: 3.0.1\ninfo:\n  title: fortify-backend-api\n  description: Backend API\n  version: v1\nsecurity:\n  - api_key: []\ntags:\n  - name: Health\n    description: Endpoints for checking health satus\n  - name: OTP\n    description: Endpoints for checking OTP received by email\npaths:\n  /health:\n    get:\n      operationId: HealthV1\n      summary: Health Check\n      tags:\n        - Health\n      security:\n        - cognito_authorizer:\n            - https://fortify-auth.mulecode.co.uk/read\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HealthV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\n  /v1/otp:\n    get:\n      operationId: GetOtpByEmailV1\n      summary: Retrieves OTP by email as parameter\n      tags:\n        - OTP\n      parameters:\n        - name: email\n          in: query\n          required: true\n          schema:\n            type: string\n            description: Email address to retrieve OTP\n            format: email\n            maxLength: 100\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/GetOtpV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\ncomponents:\n  securitySchemes:\n    api_key:\n      type: apiKey\n      name: x-api-key\n      in: header\n  schemas:\n    HealthV1Response:\n      title: Health Response\n      description: |\n        Health Response\n      type: string\n      properties:\n        status:\n          description: |\n            Health status to indicate the service is up and running\n          type: string\n    GetOtpV1Response:\n      title: Get OTP V1 Response\n      description: |\n        Returns the OTP value from a received email\n      type: string\n      properties:\n        otp:\n          description: |\n            The OTP object\n          type: object\n          properties:\n            value:\n              description: |\n                The OTP value\n              type: string\n              example: '123456'\nx-amazon-apigateway-request-validators:\n  validate-all:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
                "created_date": "2024-08-26T10:08:38Z",
                "description": "Backend API",
                "disable_execute_api_endpoint": false,
                "endpoint_configuration": [
                  {
                    "types": [
                      "REGIONAL"
                    ],
                    "vpc_endpoint_ids": []
                  }
                ],
                "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e",
                "fail_on_warnings": null,
                "id": "q5p2ozkn5e",
                "minimum_compression_size": "",
                "name": "eotb-backend-api",
                "parameters": null,
                "policy": "",
                "put_rest_api_mode": "merge",
                "root_resource_id": "vkxj244wn2",
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "binary_media_types": [],
                "endpoint_configuration": [
                  {
                    "types": [
                      false
                    ],
                    "vpc_endpoint_ids": []
                  }
                ],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
              "mode": "managed",
              "type": "aws_api_gateway_stage",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "access_log_settings": [],
                "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e/stages/api",
                "cache_cluster_enabled": false,
                "cache_cluster_size": "",
                "canary_settings": [],
                "client_certificate_id": "",
                "deployment_id": "p7igd5",
                "description": "",
                "documentation_version": "",
                "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api",
                "id": "ags-q5p2ozkn5e-api",
                "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/api",
                "rest_api_id": "q5p2ozkn5e",
                "stage_name": "api",
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "variables": {},
                "web_acl_arn": "",
                "xray_tracing_enabled": false
              },
              "sensitive_values": {
                "access_log_settings": [],
                "canary_settings": [],
                "tags": {},
                "tags_all": {},
                "variables": {}
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan.main[\"singleton\"]",
              "mode": "managed",
              "type": "aws_api_gateway_usage_plan",
              "name": "main",
              "index": "singleton",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "api_stages": [
                  {
                    "api_id": "q5p2ozkn5e",
                    "stage": "api",
                    "throttle": []
                  }
                ],
                "arn": "arn:aws:apigateway:eu-west-1::/usageplans/4cb1j4",
                "description": "EmailOTPBridge Backend API",
                "id": "4cb1j4",
                "name": "eotb-backend-api-plan",
                "product_code": "EMAIL_OTP_BRIDGE_API",
                "quota_settings": [
                  {
                    "limit": 20,
                    "offset": 2,
                    "period": "WEEK"
                  }
                ],
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "api-gateway-public",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "throttle_settings": [
                  {
                    "burst_limit": 5,
                    "rate_limit": 10
                  }
                ]
              },
              "sensitive_values": {
                "api_stages": [
                  {
                    "throttle": []
                  }
                ],
                "quota_settings": [
                  {}
                ],
                "tags": {},
                "tags_all": {},
                "throttle_settings": [
                  {}
                ]
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan_key.main[\"singleton\"]",
              "mode": "managed",
              "type": "aws_api_gateway_usage_plan_key",
              "name": "main",
              "index": "singleton",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "id": "2a7y5mau56",
                "key_id": "2a7y5mau56",
                "key_type": "API_KEY",
                "name": "eotb-backend-api-apikey",
                "usage_plan_id": "4cb1j4",
                "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
              },
              "sensitive_values": {}
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret.main[\"singleton\"]",
              "mode": "managed",
              "type": "aws_secretsmanager_secret",
              "name": "main",
              "index": "singleton",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                "description": "EmailOTPBridge Backend API",
                "force_overwrite_replica_secret": false,
                "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                "kms_key_id": "",
                "name": "eotb-backend-api-apikey",
                "name_prefix": "",
                "policy": "",
                "recovery_window_in_days": 30,
                "replica": [],
                "tags": {},
                "tags_all": {
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "replica": [],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret_version.main[\"singleton\"]",
              "mode": "managed",
              "type": "aws_secretsmanager_secret_version",
              "name": "main",
              "index": "singleton",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H|8AE98D02-A430-40A1-BD29-432EEFE485F3",
                "secret_binary": "",
                "secret_id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                "secret_string": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1",
                "version_id": "8AE98D02-A430-40A1-BD29-432EEFE485F3",
                "version_stages": [
                  "AWSCURRENT"
                ]
              },
              "sensitive_values": {
                "version_stages": [
                  false
                ]
              }
            }
          ],
          "address": "module.api_gateway_rest[\"backend-api\"]"
        },
        {
          "resources": [
            {
              "address": "module.lambda[\"api-read-otp-v1\"].aws_cloudwatch_log_group.main",
              "mode": "managed",
              "type": "aws_cloudwatch_log_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/api-read-otp-v1",
                "id": "eotb-/aws/lambda/api-read-otp-v1",
                "kms_key_id": "",
                "name": "eotb-/aws/lambda/api-read-otp-v1",
                "name_prefix": "",
                "retention_in_days": 7,
                "skip_destroy": false,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
              "mode": "managed",
              "type": "aws_lambda_function",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "architectures": [
                  "x86_64"
                ],
                "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1",
                "code_signing_config_arn": "",
                "dead_letter_config": [],
                "description": "Api for reading an received OTP",
                "environment": [
                  {
                    "variables": {
                      "ENVIRONMENT": "dev"
                    }
                  }
                ],
                "ephemeral_storage": [
                  {
                    "size": 512
                  }
                ],
                "file_system_config": [],
                "filename": "../lambda-functions/out/dist/lambda_read_otp_v1.zip",
                "function_name": "eotb-api-read-otp-v1",
                "handler": "lambda_read_otp_v1.lambda_handler",
                "id": "eotb-api-read-otp-v1",
                "image_config": [],
                "image_uri": "",
                "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations",
                "kms_key_arn": "",
                "layers": [],
                "memory_size": 254,
                "package_type": "Zip",
                "publish": false,
                "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST",
                "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST/invocations",
                "replace_security_groups_on_destroy": null,
                "replacement_security_group_ids": null,
                "reserved_concurrent_executions": -1,
                "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                "runtime": "python3.9",
                "s3_bucket": null,
                "s3_key": null,
                "s3_object_version": null,
                "signing_job_arn": "",
                "signing_profile_version_arn": "",
                "skip_destroy": false,
                "snap_start": [],
                "source_code_hash": "/3ZtjsbBpH7W/jNH7XbNDbTkMaa6GoRdkahZ11hkLtY=",
                "source_code_size": 7381,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "timeout": 60,
                "timeouts": null,
                "tracing_config": [
                  {
                    "mode": "Active"
                  }
                ],
                "version": "$LATEST",
                "vpc_config": []
              },
              "sensitive_values": {
                "architectures": [
                  false
                ],
                "dead_letter_config": [],
                "environment": [
                  {
                    "variables": {}
                  }
                ],
                "ephemeral_storage": [
                  {}
                ],
                "file_system_config": [],
                "image_config": [],
                "layers": [],
                "snap_start": [],
                "tags": {},
                "tags_all": {},
                "tracing_config": [
                  {}
                ],
                "vpc_config": []
              }
            },
            {
              "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_permission.main[\"AllowExecutionApiGateway\"]",
              "mode": "managed",
              "type": "aws_lambda_permission",
              "name": "main",
              "index": "AllowExecutionApiGateway",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "action": "lambda:InvokeFunction",
                "event_source_token": null,
                "function_name": "eotb-api-read-otp-v1",
                "function_url_auth_type": null,
                "id": "eotb-AllowExecutionApiGateway",
                "principal": "apigateway.amazonaws.com",
                "principal_org_id": null,
                "qualifier": "",
                "source_account": null,
                "source_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api/*",
                "statement_id": "eotb-AllowExecutionApiGateway",
                "statement_id_prefix": ""
              },
              "sensitive_values": {}
            }
          ],
          "address": "module.lambda[\"api-read-otp-v1\"]"
        },
        {
          "resources": [
            {
              "address": "module.lambda[\"health-status-v1\"].aws_cloudwatch_log_group.main",
              "mode": "managed",
              "type": "aws_cloudwatch_log_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/health-status-v1",
                "id": "eotb-/aws/lambda/health-status-v1",
                "kms_key_id": "",
                "name": "eotb-/aws/lambda/health-status-v1",
                "name_prefix": "",
                "retention_in_days": 7,
                "skip_destroy": false,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
              "mode": "managed",
              "type": "aws_lambda_function",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "architectures": [
                  "x86_64"
                ],
                "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1",
                "code_signing_config_arn": "",
                "dead_letter_config": [],
                "description": "Workmail OTP rule lambda function",
                "environment": [
                  {
                    "variables": {
                      "ENVIRONMENT": "dev"
                    }
                  }
                ],
                "ephemeral_storage": [
                  {
                    "size": 512
                  }
                ],
                "file_system_config": [],
                "filename": "../lambda-functions/out/dist/lambda_health_status_v1.zip",
                "function_name": "eotb-health-status-v1",
                "handler": "lambda_health_status_v1.lambda_handler",
                "id": "eotb-health-status-v1",
                "image_config": [],
                "image_uri": "",
                "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations",
                "kms_key_arn": "",
                "layers": [],
                "memory_size": 254,
                "package_type": "Zip",
                "publish": false,
                "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST",
                "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST/invocations",
                "replace_security_groups_on_destroy": null,
                "replacement_security_group_ids": null,
                "reserved_concurrent_executions": -1,
                "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                "runtime": "python3.9",
                "s3_bucket": null,
                "s3_key": null,
                "s3_object_version": null,
                "signing_job_arn": "",
                "signing_profile_version_arn": "",
                "skip_destroy": false,
                "snap_start": [],
                "source_code_hash": "fZ+1zk5tyYoZ30dgp9jIE1qhxzcxr9h2wpQFsZyBn7g=",
                "source_code_size": 7217,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "timeout": 60,
                "timeouts": null,
                "tracing_config": [
                  {
                    "mode": "Active"
                  }
                ],
                "version": "$LATEST",
                "vpc_config": []
              },
              "sensitive_values": {
                "architectures": [
                  false
                ],
                "dead_letter_config": [],
                "environment": [
                  {
                    "variables": {}
                  }
                ],
                "ephemeral_storage": [
                  {}
                ],
                "file_system_config": [],
                "image_config": [],
                "layers": [],
                "snap_start": [],
                "tags": {},
                "tags_all": {},
                "tracing_config": [
                  {}
                ],
                "vpc_config": []
              }
            }
          ],
          "address": "module.lambda[\"health-status-v1\"]"
        },
        {
          "resources": [
            {
              "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_cloudwatch_log_group.main",
              "mode": "managed",
              "type": "aws_cloudwatch_log_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/workmail-otp-rule-v1",
                "id": "eotb-/aws/lambda/workmail-otp-rule-v1",
                "kms_key_id": "",
                "name": "eotb-/aws/lambda/workmail-otp-rule-v1",
                "name_prefix": "",
                "retention_in_days": 7,
                "skip_destroy": false,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
              "mode": "managed",
              "type": "aws_lambda_function",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "architectures": [
                  "x86_64"
                ],
                "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1",
                "code_signing_config_arn": "",
                "dead_letter_config": [],
                "description": "Workmail OTP rule lambda function",
                "environment": [
                  {
                    "variables": {
                      "ENVIRONMENT": "dev"
                    }
                  }
                ],
                "ephemeral_storage": [
                  {
                    "size": 512
                  }
                ],
                "file_system_config": [],
                "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
                "function_name": "eotb-workmail-otp-rule-v1",
                "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
                "id": "eotb-workmail-otp-rule-v1",
                "image_config": [],
                "image_uri": "",
                "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1/invocations",
                "kms_key_arn": "",
                "layers": [],
                "memory_size": 254,
                "package_type": "Zip",
                "publish": false,
                "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST",
                "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST/invocations",
                "replace_security_groups_on_destroy": null,
                "replacement_security_group_ids": null,
                "reserved_concurrent_executions": -1,
                "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                "runtime": "python3.9",
                "s3_bucket": null,
                "s3_key": null,
                "s3_object_version": null,
                "signing_job_arn": "",
                "signing_profile_version_arn": "",
                "skip_destroy": false,
                "snap_start": [],
                "source_code_hash": "JahQgteoOXZGQoRKBT47S9dmDHbyug+xaANVkTY1Wto=",
                "source_code_size": 7594,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "timeout": 60,
                "timeouts": null,
                "tracing_config": [
                  {
                    "mode": "Active"
                  }
                ],
                "version": "$LATEST",
                "vpc_config": []
              },
              "sensitive_values": {
                "architectures": [
                  false
                ],
                "dead_letter_config": [],
                "environment": [
                  {
                    "variables": {}
                  }
                ],
                "ephemeral_storage": [
                  {}
                ],
                "file_system_config": [],
                "image_config": [],
                "layers": [],
                "snap_start": [],
                "tags": {},
                "tags_all": {},
                "tracing_config": [
                  {}
                ],
                "vpc_config": []
              }
            },
            {
              "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_permission.main[\"AllowExecutionWorkmail\"]",
              "mode": "managed",
              "type": "aws_lambda_permission",
              "name": "main",
              "index": "AllowExecutionWorkmail",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "action": "lambda:InvokeFunction",
                "event_source_token": null,
                "function_name": "eotb-workmail-otp-rule-v1",
                "function_url_auth_type": null,
                "id": "eotb-AllowExecutionWorkmail",
                "principal": "workmail.eu-west-1.amazonaws.com",
                "principal_org_id": null,
                "qualifier": "",
                "source_account": null,
                "source_arn": "arn:aws:workmail:eu-west-1:901872380504:organization/m-082f7c51940642c088f316c79b86ca88",
                "statement_id": "eotb-AllowExecutionWorkmail",
                "statement_id_prefix": ""
              },
              "sensitive_values": {}
            }
          ],
          "address": "module.lambda[\"workmail-otp-rule-v1\"]"
        },
        {
          "resources": [
            {
              "address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_cloudwatch_log_group.main",
              "mode": "managed",
              "type": "aws_cloudwatch_log_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "kms_key_id": null,
                "name": "eotb-/aws/lambda/workmail-otp-rule-v1-onlytest",
                "retention_in_days": 7,
                "skip_destroy": false,
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                }
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
              "mode": "managed",
              "type": "aws_lambda_function",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "code_signing_config_arn": null,
                "dead_letter_config": [],
                "description": "Workmail OTP rule lambda function",
                "environment": [
                  {
                    "variables": {
                      "ENVIRONMENT": "dev"
                    }
                  }
                ],
                "file_system_config": [],
                "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
                "function_name": "eotb-workmail-otp-rule-v1-onlytest",
                "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
                "image_config": [],
                "image_uri": null,
                "kms_key_arn": null,
                "layers": [],
                "memory_size": 254,
                "package_type": "Zip",
                "publish": false,
                "replace_security_groups_on_destroy": null,
                "replacement_security_group_ids": null,
                "reserved_concurrent_executions": -1,
                "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                "runtime": "python3.9",
                "s3_bucket": null,
                "s3_key": null,
                "s3_object_version": null,
                "skip_destroy": false,
                "snap_start": [],
                "source_code_hash": "JahQgteoOXZGQoRKBT47S9dmDHbyug+xaANVkTY1Wto=",
                "tags": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function"
                },
                "tags_all": {
                  "CreatedBy": "terraform",
                  "ModuleName": "lambda-function",
                  "Prefix": "eotb",
                  "Project": "Email OTP Bridge"
                },
                "timeout": 60,
                "timeouts": null,
                "tracing_config": [
                  {
                    "mode": "Active"
                  }
                ],
                "vpc_config": []
              },
              "sensitive_values": {
                "architectures": [],
                "dead_letter_config": [],
                "environment": [
                  {
                    "variables": {}
                  }
                ],
                "ephemeral_storage": [],
                "file_system_config": [],
                "image_config": [],
                "layers": [],
                "snap_start": [],
                "tags": {},
                "tags_all": {},
                "tracing_config": [
                  {}
                ],
                "vpc_config": []
              }
            }
          ],
          "address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"]"
        }
      ]
    }
  },
  "resource_changes": [
    {
      "address": "module.aim_policy[\"WorkMailFlowsRead\"].aws_iam_policy.main",
      "module_address": "module.aim_policy[\"WorkMailFlowsRead\"]",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "description": "Policy for reading work mail flows",
          "id": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "name": "eotb-WorkMailFlowsRead",
          "name_prefix": "",
          "path": "/",
          "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowLambdaAccessCloudWatchLogs\"},{\"Action\":[\"workmailmessageflow:GetRawMessageContent\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowReadWorkMailFlows\"}],\"Version\":\"2012-10-17\"}",
          "policy_id": "ANPA5D66INJMKTKRYMF67",
          "tags": {},
          "tags_all": {
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "description": "Policy for reading work mail flows",
          "id": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "name": "eotb-WorkMailFlowsRead",
          "name_prefix": "",
          "path": "/",
          "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowLambdaAccessCloudWatchLogs\"},{\"Action\":[\"workmailmessageflow:GetRawMessageContent\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowReadWorkMailFlows\"}],\"Version\":\"2012-10-17\"}",
          "policy_id": "ANPA5D66INJMKTKRYMF67",
          "tags": {},
          "tags_all": {
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role.main",
      "module_address": "module.aim_role_policy[\"WorkMailFlowsRead\"]",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"LambdaRole\"}],\"Version\":\"2012-10-17\"}",
          "create_date": "2024-08-26T10:08:10Z",
          "description": "Role accessing work mail flows from lambdas",
          "force_detach_policies": false,
          "id": "eotb-WorkMailFlowsRead",
          "inline_policy": [],
          "managed_policy_arns": [
            "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead"
          ],
          "max_session_duration": 3600,
          "name": "eotb-WorkMailFlowsRead",
          "name_prefix": "",
          "path": "/",
          "permissions_boundary": null,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "aim-role-policy"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "aim-role-policy",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "unique_id": "AROA5D66INJMCIBB4ZGWE"
        },
        "after": {
          "arn": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"LambdaRole\"}],\"Version\":\"2012-10-17\"}",
          "create_date": "2024-08-26T10:08:10Z",
          "description": "Role accessing work mail flows from lambdas",
          "force_detach_policies": false,
          "id": "eotb-WorkMailFlowsRead",
          "inline_policy": [],
          "managed_policy_arns": [
            "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead"
          ],
          "max_session_duration": 3600,
          "name": "eotb-WorkMailFlowsRead",
          "name_prefix": "",
          "path": "/",
          "permissions_boundary": null,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "aim-role-policy"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "aim-role-policy",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "unique_id": "AROA5D66INJMCIBB4ZGWE"
        },
        "after_unknown": {},
        "before_sensitive": {
          "inline_policy": [],
          "managed_policy_arns": [
            false
          ],
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "inline_policy": [],
          "managed_policy_arns": [
            false
          ],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role_policy_attachment.main[\"WorkMailFlowsRead\"]",
      "module_address": "module.aim_role_policy[\"WorkMailFlowsRead\"]",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "main",
      "index": "WorkMailFlowsRead",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "id": "eotb-WorkMailFlowsRead-20240826105037319500000001",
          "policy_arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "role": "eotb-WorkMailFlowsRead"
        },
        "after": {
          "id": "eotb-WorkMailFlowsRead-20240826105037319500000001",
          "policy_arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
          "role": "eotb-WorkMailFlowsRead"
        },
        "after_unknown": {},
        "before_sensitive": {},
        "after_sensitive": {}
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_api_key.main[\"singleton\"]",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_api_key",
      "name": "main",
      "index": "singleton",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:apigateway:eu-west-1::/apikeys/2a7y5mau56",
          "created_date": "2024-08-26T10:08:38Z",
          "customer_id": "",
          "description": "Managed by Terraform",
          "enabled": true,
          "id": "2a7y5mau56",
          "last_updated_date": "2024-08-26T10:08:38Z",
          "name": "eotb-backend-api-apikey",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
        },
        "after": {
          "arn": "arn:aws:apigateway:eu-west-1::/apikeys/2a7y5mau56",
          "created_date": "2024-08-26T10:08:38Z",
          "customer_id": "",
          "description": "Managed by Terraform",
          "enabled": true,
          "id": "2a7y5mau56",
          "last_updated_date": "2024-08-26T10:08:38Z",
          "name": "eotb-backend-api-apikey",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
        },
        "after_unknown": {},
        "before_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true
        },
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_deployment.main",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_deployment",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "created_date": "2024-08-26T10:08:40Z",
          "description": "",
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/",
          "id": "p7igd5",
          "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/",
          "rest_api_id": "q5p2ozkn5e",
          "stage_description": null,
          "stage_name": null,
          "triggers": {
            "redeployment": "c628daa9026c9aa8fa56c048b2d56fa2a3b54375"
          },
          "variables": null
        },
        "after": {
          "created_date": "2024-08-26T10:08:40Z",
          "description": "",
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/",
          "id": "p7igd5",
          "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/",
          "rest_api_id": "q5p2ozkn5e",
          "stage_description": null,
          "stage_name": null,
          "triggers": {
            "redeployment": "c628daa9026c9aa8fa56c048b2d56fa2a3b54375"
          },
          "variables": null
        },
        "after_unknown": {},
        "before_sensitive": {
          "triggers": {}
        },
        "after_sensitive": {
          "triggers": {}
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_rest_api.main",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_rest_api",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "api_key_source": "HEADER",
          "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e",
          "binary_media_types": [],
          "body": "openapi: 3.0.1\ninfo:\n  title: fortify-backend-api\n  description: Backend API\n  version: v1\nsecurity:\n  - api_key: []\ntags:\n  - name: Health\n    description: Endpoints for checking health satus\n  - name: OTP\n    description: Endpoints for checking OTP received by email\npaths:\n  /health:\n    get:\n      operationId: HealthV1\n      summary: Health Check\n      tags:\n        - Health\n      security:\n        - cognito_authorizer:\n            - https://fortify-auth.mulecode.co.uk/read\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HealthV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\n  /v1/otp:\n    get:\n      operationId: GetOtpByEmailV1\n      summary: Retrieves OTP by email as parameter\n      tags:\n        - OTP\n      parameters:\n        - name: email\n          in: query\n          required: true\n          schema:\n            type: string\n            description: Email address to retrieve OTP\n            format: email\n            maxLength: 100\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/GetOtpV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\ncomponents:\n  securitySchemes:\n    api_key:\n      type: apiKey\n      name: x-api-key\n      in: header\n  schemas:\n    HealthV1Response:\n      title: Health Response\n      description: |\n        Health Response\n      type: string\n      properties:\n        status:\n          description: |\n            Health status to indicate the service is up and running\n          type: string\n    GetOtpV1Response:\n      title: Get OTP V1 Response\n      description: |\n        Returns the OTP value from a received email\n      type: string\n      properties:\n        otp:\n          description: |\n            The OTP object\n          type: object\n          properties:\n            value:\n              description: |\n                The OTP value\n              type: string\n              example: '123456'\nx-amazon-apigateway-request-validators:\n  validate-all:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
          "created_date": "2024-08-26T10:08:38Z",
          "description": "Backend API",
          "disable_execute_api_endpoint": false,
          "endpoint_configuration": [
            {
              "types": [
                "REGIONAL"
              ],
              "vpc_endpoint_ids": []
            }
          ],
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e",
          "fail_on_warnings": null,
          "id": "q5p2ozkn5e",
          "minimum_compression_size": "",
          "name": "eotb-backend-api",
          "parameters": null,
          "policy": "",
          "put_rest_api_mode": "merge",
          "root_resource_id": "vkxj244wn2",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "api_key_source": "HEADER",
          "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e",
          "binary_media_types": [],
          "body": "openapi: 3.0.1\ninfo:\n  title: fortify-backend-api\n  description: Backend API\n  version: v1\nsecurity:\n  - api_key: []\ntags:\n  - name: Health\n    description: Endpoints for checking health satus\n  - name: OTP\n    description: Endpoints for checking OTP received by email\npaths:\n  /health:\n    get:\n      operationId: HealthV1\n      summary: Health Check\n      tags:\n        - Health\n      security:\n        - cognito_authorizer:\n            - https://fortify-auth.mulecode.co.uk/read\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HealthV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\n  /v1/otp:\n    get:\n      operationId: GetOtpByEmailV1\n      summary: Retrieves OTP by email as parameter\n      tags:\n        - OTP\n      parameters:\n        - name: email\n          in: query\n          required: true\n          schema:\n            type: string\n            description: Email address to retrieve OTP\n            format: email\n            maxLength: 100\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/GetOtpV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\ncomponents:\n  securitySchemes:\n    api_key:\n      type: apiKey\n      name: x-api-key\n      in: header\n  schemas:\n    HealthV1Response:\n      title: Health Response\n      description: |\n        Health Response\n      type: string\n      properties:\n        status:\n          description: |\n            Health status to indicate the service is up and running\n          type: string\n    GetOtpV1Response:\n      title: Get OTP V1 Response\n      description: |\n        Returns the OTP value from a received email\n      type: string\n      properties:\n        otp:\n          description: |\n            The OTP object\n          type: object\n          properties:\n            value:\n              description: |\n                The OTP value\n              type: string\n              example: '123456'\nx-amazon-apigateway-request-validators:\n  validate-all:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
          "created_date": "2024-08-26T10:08:38Z",
          "description": "Backend API",
          "disable_execute_api_endpoint": false,
          "endpoint_configuration": [
            {
              "types": [
                "REGIONAL"
              ],
              "vpc_endpoint_ids": []
            }
          ],
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e",
          "fail_on_warnings": null,
          "id": "q5p2ozkn5e",
          "minimum_compression_size": "",
          "name": "eotb-backend-api",
          "parameters": null,
          "policy": "",
          "put_rest_api_mode": "merge",
          "root_resource_id": "vkxj244wn2",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "binary_media_types": [],
          "endpoint_configuration": [
            {
              "types": [
                false
              ],
              "vpc_endpoint_ids": []
            }
          ],
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "binary_media_types": [],
          "endpoint_configuration": [
            {
              "types": [
                false
              ],
              "vpc_endpoint_ids": []
            }
          ],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_stage",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "access_log_settings": [],
          "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e/stages/api",
          "cache_cluster_enabled": false,
          "cache_cluster_size": "",
          "canary_settings": [],
          "client_certificate_id": "",
          "deployment_id": "p7igd5",
          "description": "",
          "documentation_version": "",
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api",
          "id": "ags-q5p2ozkn5e-api",
          "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/api",
          "rest_api_id": "q5p2ozkn5e",
          "stage_name": "api",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "variables": {},
          "web_acl_arn": "",
          "xray_tracing_enabled": false
        },
        "after": {
          "access_log_settings": [],
          "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e/stages/api",
          "cache_cluster_enabled": false,
          "cache_cluster_size": "",
          "canary_settings": [],
          "client_certificate_id": "",
          "deployment_id": "p7igd5",
          "description": "",
          "documentation_version": "",
          "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api",
          "id": "ags-q5p2ozkn5e-api",
          "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/api",
          "rest_api_id": "q5p2ozkn5e",
          "stage_name": "api",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "variables": {},
          "web_acl_arn": "",
          "xray_tracing_enabled": false
        },
        "after_unknown": {},
        "before_sensitive": {
          "access_log_settings": [],
          "canary_settings": [],
          "tags": {},
          "tags_all": {},
          "variables": {}
        },
        "after_sensitive": {
          "access_log_settings": [],
          "canary_settings": [],
          "tags": {},
          "tags_all": {},
          "variables": {}
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan.main[\"singleton\"]",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_usage_plan",
      "name": "main",
      "index": "singleton",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "api_stages": [
            {
              "api_id": "q5p2ozkn5e",
              "stage": "api",
              "throttle": []
            }
          ],
          "arn": "arn:aws:apigateway:eu-west-1::/usageplans/4cb1j4",
          "description": "EmailOTPBridge Backend API",
          "id": "4cb1j4",
          "name": "eotb-backend-api-plan",
          "product_code": "EMAIL_OTP_BRIDGE_API",
          "quota_settings": [
            {
              "limit": 20,
              "offset": 2,
              "period": "WEEK"
            }
          ],
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "throttle_settings": [
            {
              "burst_limit": 5,
              "rate_limit": 10
            }
          ]
        },
        "after": {
          "api_stages": [
            {
              "api_id": "q5p2ozkn5e",
              "stage": "api",
              "throttle": []
            }
          ],
          "arn": "arn:aws:apigateway:eu-west-1::/usageplans/4cb1j4",
          "description": "EmailOTPBridge Backend API",
          "id": "4cb1j4",
          "name": "eotb-backend-api-plan",
          "product_code": "EMAIL_OTP_BRIDGE_API",
          "quota_settings": [
            {
              "limit": 20,
              "offset": 2,
              "period": "WEEK"
            }
          ],
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "api-gateway-public",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "throttle_settings": [
            {
              "burst_limit": 5,
              "rate_limit": 10
            }
          ]
        },
        "after_unknown": {},
        "before_sensitive": {
          "api_stages": [
            {
              "throttle": []
            }
          ],
          "quota_settings": [
            {}
          ],
          "tags": {},
          "tags_all": {},
          "throttle_settings": [
            {}
          ]
        },
        "after_sensitive": {
          "api_stages": [
            {
              "throttle": []
            }
          ],
          "quota_settings": [
            {}
          ],
          "tags": {},
          "tags_all": {},
          "throttle_settings": [
            {}
          ]
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan_key.main[\"singleton\"]",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_api_gateway_usage_plan_key",
      "name": "main",
      "index": "singleton",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "id": "2a7y5mau56",
          "key_id": "2a7y5mau56",
          "key_type": "API_KEY",
          "name": "eotb-backend-api-apikey",
          "usage_plan_id": "4cb1j4",
          "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
        },
        "after": {
          "id": "2a7y5mau56",
          "key_id": "2a7y5mau56",
          "key_type": "API_KEY",
          "name": "eotb-backend-api-apikey",
          "usage_plan_id": "4cb1j4",
          "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
        },
        "after_unknown": {},
        "before_sensitive": {},
        "after_sensitive": {}
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret.main[\"singleton\"]",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "main",
      "index": "singleton",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "description": "EmailOTPBridge Backend API",
          "force_overwrite_replica_secret": false,
          "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "kms_key_id": "",
          "name": "eotb-backend-api-apikey",
          "name_prefix": "",
          "policy": "",
          "recovery_window_in_days": 30,
          "replica": [],
          "tags": {},
          "tags_all": {
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "description": "EmailOTPBridge Backend API",
          "force_overwrite_replica_secret": false,
          "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "kms_key_id": "",
          "name": "eotb-backend-api-apikey",
          "name_prefix": "",
          "policy": "",
          "recovery_window_in_days": 30,
          "replica": [],
          "tags": {},
          "tags_all": {
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "replica": [],
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "replica": [],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret_version.main[\"singleton\"]",
      "module_address": "module.api_gateway_rest[\"backend-api\"]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "main",
      "index": "singleton",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H|8AE98D02-A430-40A1-BD29-432EEFE485F3",
          "secret_binary": "",
          "secret_id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "secret_string": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1",
          "version_id": "8AE98D02-A430-40A1-BD29-432EEFE485F3",
          "version_stages": [
            "AWSCURRENT"
          ]
        },
        "after": {
          "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H|8AE98D02-A430-40A1-BD29-432EEFE485F3",
          "secret_binary": "",
          "secret_id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
          "secret_string": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1",
          "version_id": "8AE98D02-A430-40A1-BD29-432EEFE485F3",
          "version_stages": [
            "AWSCURRENT"
          ]
        },
        "after_unknown": {},
        "before_sensitive": {
          "secret_binary": true,
          "secret_string": true,
          "version_stages": [
            false
          ]
        },
        "after_sensitive": {
          "secret_binary": true,
          "secret_string": true,
          "version_stages": [
            false
          ]
        }
      }
    },
    {
      "address": "module.lambda[\"api-read-otp-v1\"].aws_cloudwatch_log_group.main",
      "module_address": "module.lambda[\"api-read-otp-v1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/api-read-otp-v1",
          "id": "eotb-/aws/lambda/api-read-otp-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/api-read-otp-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/api-read-otp-v1",
          "id": "eotb-/aws/lambda/api-read-otp-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/api-read-otp-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "module_address": "module.lambda[\"api-read-otp-v1\"]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "update"
        ],
        "before": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Api for reading an received OTP",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_read_otp_v1.zip",
          "function_name": "eotb-api-read-otp-v1",
          "handler": "lambda_read_otp_v1.lambda_handler",
          "id": "eotb-api-read-otp-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations",
          "kms_key_arn": "",
          "last_modified": "2024-08-26T10:08:32.147+0000",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "RnZClDd6YglgMftFlqOwsRZHnFuzUeChM0b7FZlBias=",
          "source_code_size": 7381,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Api for reading an received OTP",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_read_otp_v1.zip",
          "function_name": "eotb-api-read-otp-v1",
          "handler": "lambda_read_otp_v1.lambda_handler",
          "id": "eotb-api-read-otp-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations",
          "kms_key_arn": "",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "/3ZtjsbBpH7W/jNH7XbNDbTkMaa6GoRdkahZ11hkLtY=",
          "source_code_size": 7381,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after_unknown": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "last_modified": true,
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "before_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "after_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        }
      }
    },
    {
      "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_permission.main[\"AllowExecutionApiGateway\"]",
      "module_address": "module.lambda[\"api-read-otp-v1\"]",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "main",
      "index": "AllowExecutionApiGateway",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "action": "lambda:InvokeFunction",
          "event_source_token": null,
          "function_name": "eotb-api-read-otp-v1",
          "function_url_auth_type": null,
          "id": "eotb-AllowExecutionApiGateway",
          "principal": "apigateway.amazonaws.com",
          "principal_org_id": null,
          "qualifier": "",
          "source_account": null,
          "source_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api/*",
          "statement_id": "eotb-AllowExecutionApiGateway",
          "statement_id_prefix": ""
        },
        "after": {
          "action": "lambda:InvokeFunction",
          "event_source_token": null,
          "function_name": "eotb-api-read-otp-v1",
          "function_url_auth_type": null,
          "id": "eotb-AllowExecutionApiGateway",
          "principal": "apigateway.amazonaws.com",
          "principal_org_id": null,
          "qualifier": "",
          "source_account": null,
          "source_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api/*",
          "statement_id": "eotb-AllowExecutionApiGateway",
          "statement_id_prefix": ""
        },
        "after_unknown": {},
        "before_sensitive": {},
        "after_sensitive": {}
      }
    },
    {
      "address": "module.lambda[\"health-status-v1\"].aws_cloudwatch_log_group.main",
      "module_address": "module.lambda[\"health-status-v1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/health-status-v1",
          "id": "eotb-/aws/lambda/health-status-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/health-status-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/health-status-v1",
          "id": "eotb-/aws/lambda/health-status-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/health-status-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "module_address": "module.lambda[\"health-status-v1\"]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "update"
        ],
        "before": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Workmail OTP rule lambda function",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_health_status_v1.zip",
          "function_name": "eotb-health-status-v1",
          "handler": "lambda_health_status_v1.lambda_handler",
          "id": "eotb-health-status-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations",
          "kms_key_arn": "",
          "last_modified": "2024-08-26T10:08:26.091+0000",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "otuogC8LiMJ4RFVfiQ36la9HZmnQmqLkMaplPMiY9F8=",
          "source_code_size": 7217,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Workmail OTP rule lambda function",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_health_status_v1.zip",
          "function_name": "eotb-health-status-v1",
          "handler": "lambda_health_status_v1.lambda_handler",
          "id": "eotb-health-status-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations",
          "kms_key_arn": "",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "fZ+1zk5tyYoZ30dgp9jIE1qhxzcxr9h2wpQFsZyBn7g=",
          "source_code_size": 7217,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after_unknown": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "last_modified": true,
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "before_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "after_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        }
      }
    },
    {
      "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_cloudwatch_log_group.main",
      "module_address": "module.lambda[\"workmail-otp-rule-v1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/workmail-otp-rule-v1",
          "id": "eotb-/aws/lambda/workmail-otp-rule-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/workmail-otp-rule-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after": {
          "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/workmail-otp-rule-v1",
          "id": "eotb-/aws/lambda/workmail-otp-rule-v1",
          "kms_key_id": "",
          "name": "eotb-/aws/lambda/workmail-otp-rule-v1",
          "name_prefix": "",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {},
        "before_sensitive": {
          "tags": {},
          "tags_all": {}
        },
        "after_sensitive": {
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "module_address": "module.lambda[\"workmail-otp-rule-v1\"]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "update"
        ],
        "before": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Workmail OTP rule lambda function",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
          "function_name": "eotb-workmail-otp-rule-v1",
          "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
          "id": "eotb-workmail-otp-rule-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1/invocations",
          "kms_key_arn": "",
          "last_modified": "2024-08-26T10:08:20.030+0000",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "oMKPbAZ3vNBX0rbvjS9eVyYeYf9fFkeVIXqnnGQcp94=",
          "source_code_size": 7594,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after": {
          "architectures": [
            "x86_64"
          ],
          "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1",
          "code_signing_config_arn": "",
          "dead_letter_config": [],
          "description": "Workmail OTP rule lambda function",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "ephemeral_storage": [
            {
              "size": 512
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
          "function_name": "eotb-workmail-otp-rule-v1",
          "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
          "id": "eotb-workmail-otp-rule-v1",
          "image_config": [],
          "image_uri": "",
          "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1/invocations",
          "kms_key_arn": "",
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST",
          "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST/invocations",
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "signing_job_arn": "",
          "signing_profile_version_arn": "",
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "JahQgteoOXZGQoRKBT47S9dmDHbyug+xaANVkTY1Wto=",
          "source_code_size": 7594,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "version": "$LATEST",
          "vpc_config": []
        },
        "after_unknown": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "last_modified": true,
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "before_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        },
        "after_sensitive": {
          "architectures": [
            false
          ],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [
            {}
          ],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        }
      }
    },
    {
      "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_permission.main[\"AllowExecutionWorkmail\"]",
      "module_address": "module.lambda[\"workmail-otp-rule-v1\"]",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "main",
      "index": "AllowExecutionWorkmail",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "no-op"
        ],
        "before": {
          "action": "lambda:InvokeFunction",
          "event_source_token": null,
          "function_name": "eotb-workmail-otp-rule-v1",
          "function_url_auth_type": null,
          "id": "eotb-AllowExecutionWorkmail",
          "principal": "workmail.eu-west-1.amazonaws.com",
          "principal_org_id": null,
          "qualifier": "",
          "source_account": null,
          "source_arn": "arn:aws:workmail:eu-west-1:901872380504:organization/m-082f7c51940642c088f316c79b86ca88",
          "statement_id": "eotb-AllowExecutionWorkmail",
          "statement_id_prefix": ""
        },
        "after": {
          "action": "lambda:InvokeFunction",
          "event_source_token": null,
          "function_name": "eotb-workmail-otp-rule-v1",
          "function_url_auth_type": null,
          "id": "eotb-AllowExecutionWorkmail",
          "principal": "workmail.eu-west-1.amazonaws.com",
          "principal_org_id": null,
          "qualifier": "",
          "source_account": null,
          "source_arn": "arn:aws:workmail:eu-west-1:901872380504:organization/m-082f7c51940642c088f316c79b86ca88",
          "statement_id": "eotb-AllowExecutionWorkmail",
          "statement_id_prefix": ""
        },
        "after_unknown": {},
        "before_sensitive": {},
        "after_sensitive": {}
      }
    },
    {
      "address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_cloudwatch_log_group.main",
      "module_address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "kms_key_id": null,
          "name": "eotb-/aws/lambda/workmail-otp-rule-v1-onlytest",
          "retention_in_days": 7,
          "skip_destroy": false,
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          }
        },
        "after_unknown": {
          "arn": true,
          "id": true,
          "name_prefix": true,
          "tags": {},
          "tags_all": {}
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "module_address": "module.lambda[\"workmail-otp-rule-v1-onlytest\"]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "code_signing_config_arn": null,
          "dead_letter_config": [],
          "description": "Workmail OTP rule lambda function",
          "environment": [
            {
              "variables": {
                "ENVIRONMENT": "dev"
              }
            }
          ],
          "file_system_config": [],
          "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
          "function_name": "eotb-workmail-otp-rule-v1-onlytest",
          "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
          "image_config": [],
          "image_uri": null,
          "kms_key_arn": null,
          "layers": [],
          "memory_size": 254,
          "package_type": "Zip",
          "publish": false,
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
          "runtime": "python3.9",
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "skip_destroy": false,
          "snap_start": [],
          "source_code_hash": "JahQgteoOXZGQoRKBT47S9dmDHbyug+xaANVkTY1Wto=",
          "tags": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function"
          },
          "tags_all": {
            "CreatedBy": "terraform",
            "ModuleName": "lambda-function",
            "Prefix": "eotb",
            "Project": "Email OTP Bridge"
          },
          "timeout": 60,
          "timeouts": null,
          "tracing_config": [
            {
              "mode": "Active"
            }
          ],
          "vpc_config": []
        },
        "after_unknown": {
          "architectures": true,
          "arn": true,
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": true,
          "file_system_config": [],
          "id": true,
          "image_config": [],
          "invoke_arn": true,
          "last_modified": true,
          "layers": [],
          "qualified_arn": true,
          "qualified_invoke_arn": true,
          "signing_job_arn": true,
          "signing_profile_version_arn": true,
          "snap_start": [],
          "source_code_size": true,
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "version": true,
          "vpc_config": []
        },
        "before_sensitive": false,
        "after_sensitive": {
          "architectures": [],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": [],
          "file_system_config": [],
          "image_config": [],
          "layers": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [
            {}
          ],
          "vpc_config": []
        }
      }
    }
  ],
  "prior_state": {
    "format_version": "1.0",
    "terraform_version": "1.7.4",
    "values": {
      "root_module": {
        "child_modules": [
          {
            "resources": [
              {
                "address": "module.aim_policy[\"WorkMailFlowsRead\"].aws_iam_policy.main",
                "mode": "managed",
                "type": "aws_iam_policy",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                  "description": "Policy for reading work mail flows",
                  "id": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                  "name": "eotb-WorkMailFlowsRead",
                  "name_prefix": "",
                  "path": "/",
                  "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowLambdaAccessCloudWatchLogs\"},{\"Action\":[\"workmailmessageflow:GetRawMessageContent\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowReadWorkMailFlows\"}],\"Version\":\"2012-10-17\"}",
                  "policy_id": "ANPA5D66INJMKTKRYMF67",
                  "tags": {},
                  "tags_all": {
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "tags": {},
                  "tags_all": {}
                }
              }
            ],
            "address": "module.aim_policy[\"WorkMailFlowsRead\"]"
          },
          {
            "resources": [
              {
                "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role.main",
                "mode": "managed",
                "type": "aws_iam_role",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                  "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"LambdaRole\"}],\"Version\":\"2012-10-17\"}",
                  "create_date": "2024-08-26T10:08:10Z",
                  "description": "Role accessing work mail flows from lambdas",
                  "force_detach_policies": false,
                  "id": "eotb-WorkMailFlowsRead",
                  "inline_policy": [],
                  "managed_policy_arns": [
                    "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead"
                  ],
                  "max_session_duration": 3600,
                  "name": "eotb-WorkMailFlowsRead",
                  "name_prefix": "",
                  "path": "/",
                  "permissions_boundary": null,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "aim-role-policy"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "aim-role-policy",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "unique_id": "AROA5D66INJMCIBB4ZGWE"
                },
                "sensitive_values": {
                  "inline_policy": [],
                  "managed_policy_arns": [
                    false
                  ],
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main"
                ]
              },
              {
                "address": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role_policy_attachment.main[\"WorkMailFlowsRead\"]",
                "mode": "managed",
                "type": "aws_iam_role_policy_attachment",
                "name": "main",
                "index": "WorkMailFlowsRead",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "id": "eotb-WorkMailFlowsRead-20240826105037319500000001",
                  "policy_arn": "arn:aws:iam::901872380504:policy/eotb-WorkMailFlowsRead",
                  "role": "eotb-WorkMailFlowsRead"
                },
                "sensitive_values": {},
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main"
                ]
              }
            ],
            "address": "module.aim_role_policy[\"WorkMailFlowsRead\"]"
          },
          {
            "resources": [
              {
                "address": "module.api_gateway_rest[\"backend-api\"].data.aws_caller_identity.current",
                "mode": "data",
                "type": "aws_caller_identity",
                "name": "current",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "account_id": "901872380504",
                  "arn": "arn:aws:iam::901872380504:user/rafael.mule",
                  "id": "901872380504",
                  "user_id": "AIDA5D66INJMO2LRMUAWR"
                },
                "sensitive_values": {}
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].data.aws_region.current",
                "mode": "data",
                "type": "aws_region",
                "name": "current",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "description": "Europe (Ireland)",
                  "endpoint": "ec2.eu-west-1.amazonaws.com",
                  "id": "eu-west-1",
                  "name": "eu-west-1"
                },
                "sensitive_values": {}
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_api_key.main[\"singleton\"]",
                "mode": "managed",
                "type": "aws_api_gateway_api_key",
                "name": "main",
                "index": "singleton",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:apigateway:eu-west-1::/apikeys/2a7y5mau56",
                  "created_date": "2024-08-26T10:08:38Z",
                  "customer_id": "",
                  "description": "Managed by Terraform",
                  "enabled": true,
                  "id": "2a7y5mau56",
                  "last_updated_date": "2024-08-26T10:08:38Z",
                  "name": "eotb-backend-api-apikey",
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
                },
                "sensitive_values": {
                  "tags": {},
                  "tags_all": {},
                  "value": true
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_deployment.main",
                "mode": "managed",
                "type": "aws_api_gateway_deployment",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "created_date": "2024-08-26T10:08:40Z",
                  "description": "",
                  "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/",
                  "id": "p7igd5",
                  "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/",
                  "rest_api_id": "q5p2ozkn5e",
                  "stage_description": null,
                  "stage_name": null,
                  "triggers": {
                    "redeployment": "c628daa9026c9aa8fa56c048b2d56fa2a3b54375"
                  },
                  "variables": null
                },
                "sensitive_values": {
                  "triggers": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_rest_api.main",
                "mode": "managed",
                "type": "aws_api_gateway_rest_api",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "api_key_source": "HEADER",
                  "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e",
                  "binary_media_types": [],
                  "body": "openapi: 3.0.1\ninfo:\n  title: fortify-backend-api\n  description: Backend API\n  version: v1\nsecurity:\n  - api_key: []\ntags:\n  - name: Health\n    description: Endpoints for checking health satus\n  - name: OTP\n    description: Endpoints for checking OTP received by email\npaths:\n  /health:\n    get:\n      operationId: HealthV1\n      summary: Health Check\n      tags:\n        - Health\n      security:\n        - cognito_authorizer:\n            - https://fortify-auth.mulecode.co.uk/read\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/HealthV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\n  /v1/otp:\n    get:\n      operationId: GetOtpByEmailV1\n      summary: Retrieves OTP by email as parameter\n      tags:\n        - OTP\n      parameters:\n        - name: email\n          in: query\n          required: true\n          schema:\n            type: string\n            description: Email address to retrieve OTP\n            format: email\n            maxLength: 100\n      responses:\n        '200':\n          description: 200 Response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/GetOtpV1Response'\n      x-amazon-apigateway-request-validator: validate-all\n      x-amazon-apigateway-integration:\n        httpMethod: POST\n        uri: arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations\n        passthroughBehavior: when_no_match\n        timeoutInMillis: 5000\n        type: aws_proxy\ncomponents:\n  securitySchemes:\n    api_key:\n      type: apiKey\n      name: x-api-key\n      in: header\n  schemas:\n    HealthV1Response:\n      title: Health Response\n      description: |\n        Health Response\n      type: string\n      properties:\n        status:\n          description: |\n            Health status to indicate the service is up and running\n          type: string\n    GetOtpV1Response:\n      title: Get OTP V1 Response\n      description: |\n        Returns the OTP value from a received email\n      type: string\n      properties:\n        otp:\n          description: |\n            The OTP object\n          type: object\n          properties:\n            value:\n              description: |\n                The OTP value\n              type: string\n              example: '123456'\nx-amazon-apigateway-request-validators:\n  validate-all:\n    validateRequestParameters: true\n    validateRequestBody: true\n",
                  "created_date": "2024-08-26T10:08:38Z",
                  "description": "Backend API",
                  "disable_execute_api_endpoint": false,
                  "endpoint_configuration": [
                    {
                      "types": [
                        "REGIONAL"
                      ],
                      "vpc_endpoint_ids": []
                    }
                  ],
                  "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e",
                  "fail_on_warnings": null,
                  "id": "q5p2ozkn5e",
                  "minimum_compression_size": "",
                  "name": "eotb-backend-api",
                  "parameters": null,
                  "policy": "",
                  "put_rest_api_mode": "merge",
                  "root_resource_id": "vkxj244wn2",
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "binary_media_types": [],
                  "endpoint_configuration": [
                    {
                      "types": [
                        false
                      ],
                      "vpc_endpoint_ids": []
                    }
                  ],
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
                "mode": "managed",
                "type": "aws_api_gateway_stage",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "access_log_settings": [],
                  "arn": "arn:aws:apigateway:eu-west-1::/restapis/q5p2ozkn5e/stages/api",
                  "cache_cluster_enabled": false,
                  "cache_cluster_size": "",
                  "canary_settings": [],
                  "client_certificate_id": "",
                  "deployment_id": "p7igd5",
                  "description": "",
                  "documentation_version": "",
                  "execution_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api",
                  "id": "ags-q5p2ozkn5e-api",
                  "invoke_url": "https://q5p2ozkn5e.execute-api.eu-west-1.amazonaws.com/api",
                  "rest_api_id": "q5p2ozkn5e",
                  "stage_name": "api",
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "variables": {},
                  "web_acl_arn": "",
                  "xray_tracing_enabled": false
                },
                "sensitive_values": {
                  "access_log_settings": [],
                  "canary_settings": [],
                  "tags": {},
                  "tags_all": {},
                  "variables": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.api_gateway_rest.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan.main[\"singleton\"]",
                "mode": "managed",
                "type": "aws_api_gateway_usage_plan",
                "name": "main",
                "index": "singleton",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "api_stages": [
                    {
                      "api_id": "q5p2ozkn5e",
                      "stage": "api",
                      "throttle": []
                    }
                  ],
                  "arn": "arn:aws:apigateway:eu-west-1::/usageplans/4cb1j4",
                  "description": "EmailOTPBridge Backend API",
                  "id": "4cb1j4",
                  "name": "eotb-backend-api-plan",
                  "product_code": "EMAIL_OTP_BRIDGE_API",
                  "quota_settings": [
                    {
                      "limit": 20,
                      "offset": 2,
                      "period": "WEEK"
                    }
                  ],
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "api-gateway-public",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "throttle_settings": [
                    {
                      "burst_limit": 5,
                      "rate_limit": 10
                    }
                  ]
                },
                "sensitive_values": {
                  "api_stages": [
                    {
                      "throttle": []
                    }
                  ],
                  "quota_settings": [
                    {}
                  ],
                  "tags": {},
                  "tags_all": {},
                  "throttle_settings": [
                    {}
                  ]
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.api_gateway_rest.aws_api_gateway_stage.main",
                  "module.api_gateway_rest.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_usage_plan_key.main[\"singleton\"]",
                "mode": "managed",
                "type": "aws_api_gateway_usage_plan_key",
                "name": "main",
                "index": "singleton",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "id": "2a7y5mau56",
                  "key_id": "2a7y5mau56",
                  "key_type": "API_KEY",
                  "name": "eotb-backend-api-apikey",
                  "usage_plan_id": "4cb1j4",
                  "value": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1"
                },
                "sensitive_values": {},
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_api_key.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.api_gateway_rest.aws_api_gateway_stage.main",
                  "module.api_gateway_rest.aws_api_gateway_usage_plan.main",
                  "module.api_gateway_rest.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret.main[\"singleton\"]",
                "mode": "managed",
                "type": "aws_secretsmanager_secret",
                "name": "main",
                "index": "singleton",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                  "description": "EmailOTPBridge Backend API",
                  "force_overwrite_replica_secret": false,
                  "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                  "kms_key_id": "",
                  "name": "eotb-backend-api-apikey",
                  "name_prefix": "",
                  "policy": "",
                  "recovery_window_in_days": 30,
                  "replica": [],
                  "tags": {},
                  "tags_all": {
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "replica": [],
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              },
              {
                "address": "module.api_gateway_rest[\"backend-api\"].aws_secretsmanager_secret_version.main[\"singleton\"]",
                "mode": "managed",
                "type": "aws_secretsmanager_secret_version",
                "name": "main",
                "index": "singleton",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                  "id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H|8AE98D02-A430-40A1-BD29-432EEFE485F3",
                  "secret_binary": "",
                  "secret_id": "arn:aws:secretsmanager:eu-west-1:901872380504:secret:eotb-backend-api-apikey-EvEY0H",
                  "secret_string": "u6ob2cEYl96EDsGC6cffQaPSiiAqzq5oYsVPqdW1",
                  "version_id": "8AE98D02-A430-40A1-BD29-432EEFE485F3",
                  "version_stages": [
                    "AWSCURRENT"
                  ]
                },
                "sensitive_values": {
                  "secret_binary": true,
                  "secret_string": true,
                  "version_stages": [
                    false
                  ]
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_api_key.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.api_gateway_rest.aws_api_gateway_stage.main",
                  "module.api_gateway_rest.aws_api_gateway_usage_plan.main",
                  "module.api_gateway_rest.aws_api_gateway_usage_plan_key.main",
                  "module.api_gateway_rest.aws_cloudwatch_log_group.main",
                  "module.api_gateway_rest.aws_secretsmanager_secret.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              }
            ],
            "address": "module.api_gateway_rest[\"backend-api\"]"
          },
          {
            "resources": [
              {
                "address": "module.lambda[\"api-read-otp-v1\"].aws_cloudwatch_log_group.main",
                "mode": "managed",
                "type": "aws_cloudwatch_log_group",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/api-read-otp-v1",
                  "id": "eotb-/aws/lambda/api-read-otp-v1",
                  "kms_key_id": "",
                  "name": "eotb-/aws/lambda/api-read-otp-v1",
                  "name_prefix": "",
                  "retention_in_days": 7,
                  "skip_destroy": false,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main"
                ]
              },
              {
                "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
                "mode": "managed",
                "type": "aws_lambda_function",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "architectures": [
                    "x86_64"
                  ],
                  "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1",
                  "code_signing_config_arn": "",
                  "dead_letter_config": [],
                  "description": "Api for reading an received OTP",
                  "environment": [
                    {
                      "variables": {
                        "ENVIRONMENT": "dev"
                      }
                    }
                  ],
                  "ephemeral_storage": [
                    {
                      "size": 512
                    }
                  ],
                  "file_system_config": [],
                  "filename": "../lambda-functions/out/dist/lambda_read_otp_v1.zip",
                  "function_name": "eotb-api-read-otp-v1",
                  "handler": "lambda_read_otp_v1.lambda_handler",
                  "id": "eotb-api-read-otp-v1",
                  "image_config": [],
                  "image_uri": "",
                  "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1/invocations",
                  "kms_key_arn": "",
                  "last_modified": "2024-08-26T10:08:32.147+0000",
                  "layers": [],
                  "memory_size": 254,
                  "package_type": "Zip",
                  "publish": false,
                  "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST",
                  "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-api-read-otp-v1:$LATEST/invocations",
                  "replace_security_groups_on_destroy": null,
                  "replacement_security_group_ids": null,
                  "reserved_concurrent_executions": -1,
                  "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                  "runtime": "python3.9",
                  "s3_bucket": null,
                  "s3_key": null,
                  "s3_object_version": null,
                  "signing_job_arn": "",
                  "signing_profile_version_arn": "",
                  "skip_destroy": false,
                  "snap_start": [],
                  "source_code_hash": "RnZClDd6YglgMftFlqOwsRZHnFuzUeChM0b7FZlBias=",
                  "source_code_size": 7381,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "timeout": 60,
                  "timeouts": null,
                  "tracing_config": [
                    {
                      "mode": "Active"
                    }
                  ],
                  "version": "$LATEST",
                  "vpc_config": []
                },
                "sensitive_values": {
                  "architectures": [
                    false
                  ],
                  "dead_letter_config": [],
                  "environment": [
                    {
                      "variables": {}
                    }
                  ],
                  "ephemeral_storage": [
                    {}
                  ],
                  "file_system_config": [],
                  "image_config": [],
                  "layers": [],
                  "snap_start": [],
                  "tags": {},
                  "tags_all": {},
                  "tracing_config": [
                    {}
                  ],
                  "vpc_config": []
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main"
                ]
              },
              {
                "address": "module.lambda[\"api-read-otp-v1\"].aws_lambda_permission.main[\"AllowExecutionApiGateway\"]",
                "mode": "managed",
                "type": "aws_lambda_permission",
                "name": "main",
                "index": "AllowExecutionApiGateway",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "action": "lambda:InvokeFunction",
                  "event_source_token": null,
                  "function_name": "eotb-api-read-otp-v1",
                  "function_url_auth_type": null,
                  "id": "eotb-AllowExecutionApiGateway",
                  "principal": "apigateway.amazonaws.com",
                  "principal_org_id": null,
                  "qualifier": "",
                  "source_account": null,
                  "source_arn": "arn:aws:execute-api:eu-west-1:901872380504:q5p2ozkn5e/api/*",
                  "statement_id": "eotb-AllowExecutionApiGateway",
                  "statement_id_prefix": ""
                },
                "sensitive_values": {},
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              }
            ],
            "address": "module.lambda[\"api-read-otp-v1\"]"
          },
          {
            "resources": [
              {
                "address": "module.lambda[\"health-status-v1\"].aws_cloudwatch_log_group.main",
                "mode": "managed",
                "type": "aws_cloudwatch_log_group",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/health-status-v1",
                  "id": "eotb-/aws/lambda/health-status-v1",
                  "kms_key_id": "",
                  "name": "eotb-/aws/lambda/health-status-v1",
                  "name_prefix": "",
                  "retention_in_days": 7,
                  "skip_destroy": false,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main"
                ]
              },
              {
                "address": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
                "mode": "managed",
                "type": "aws_lambda_function",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "architectures": [
                    "x86_64"
                  ],
                  "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1",
                  "code_signing_config_arn": "",
                  "dead_letter_config": [],
                  "description": "Workmail OTP rule lambda function",
                  "environment": [
                    {
                      "variables": {
                        "ENVIRONMENT": "dev"
                      }
                    }
                  ],
                  "ephemeral_storage": [
                    {
                      "size": 512
                    }
                  ],
                  "file_system_config": [],
                  "filename": "../lambda-functions/out/dist/lambda_health_status_v1.zip",
                  "function_name": "eotb-health-status-v1",
                  "handler": "lambda_health_status_v1.lambda_handler",
                  "id": "eotb-health-status-v1",
                  "image_config": [],
                  "image_uri": "",
                  "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1/invocations",
                  "kms_key_arn": "",
                  "last_modified": "2024-08-26T10:08:26.091+0000",
                  "layers": [],
                  "memory_size": 254,
                  "package_type": "Zip",
                  "publish": false,
                  "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST",
                  "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-health-status-v1:$LATEST/invocations",
                  "replace_security_groups_on_destroy": null,
                  "replacement_security_group_ids": null,
                  "reserved_concurrent_executions": -1,
                  "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                  "runtime": "python3.9",
                  "s3_bucket": null,
                  "s3_key": null,
                  "s3_object_version": null,
                  "signing_job_arn": "",
                  "signing_profile_version_arn": "",
                  "skip_destroy": false,
                  "snap_start": [],
                  "source_code_hash": "otuogC8LiMJ4RFVfiQ36la9HZmnQmqLkMaplPMiY9F8=",
                  "source_code_size": 7217,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "timeout": 60,
                  "timeouts": null,
                  "tracing_config": [
                    {
                      "mode": "Active"
                    }
                  ],
                  "version": "$LATEST",
                  "vpc_config": []
                },
                "sensitive_values": {
                  "architectures": [
                    false
                  ],
                  "dead_letter_config": [],
                  "environment": [
                    {
                      "variables": {}
                    }
                  ],
                  "ephemeral_storage": [
                    {}
                  ],
                  "file_system_config": [],
                  "image_config": [],
                  "layers": [],
                  "snap_start": [],
                  "tags": {},
                  "tags_all": {},
                  "tracing_config": [
                    {}
                  ],
                  "vpc_config": []
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main"
                ]
              }
            ],
            "address": "module.lambda[\"health-status-v1\"]"
          },
          {
            "resources": [
              {
                "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_cloudwatch_log_group.main",
                "mode": "managed",
                "type": "aws_cloudwatch_log_group",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "arn": "arn:aws:logs:eu-west-1:901872380504:log-group:eotb-/aws/lambda/workmail-otp-rule-v1",
                  "id": "eotb-/aws/lambda/workmail-otp-rule-v1",
                  "kms_key_id": "",
                  "name": "eotb-/aws/lambda/workmail-otp-rule-v1",
                  "name_prefix": "",
                  "retention_in_days": 7,
                  "skip_destroy": false,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  }
                },
                "sensitive_values": {
                  "tags": {},
                  "tags_all": {}
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main"
                ]
              },
              {
                "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
                "mode": "managed",
                "type": "aws_lambda_function",
                "name": "main",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "architectures": [
                    "x86_64"
                  ],
                  "arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1",
                  "code_signing_config_arn": "",
                  "dead_letter_config": [],
                  "description": "Workmail OTP rule lambda function",
                  "environment": [
                    {
                      "variables": {
                        "ENVIRONMENT": "dev"
                      }
                    }
                  ],
                  "ephemeral_storage": [
                    {
                      "size": 512
                    }
                  ],
                  "file_system_config": [],
                  "filename": "../lambda-functions/out/dist/lambda_workmail_inbound_otp_rule_v1.zip",
                  "function_name": "eotb-workmail-otp-rule-v1",
                  "handler": "lambda_workmail_inbound_otp_rule_v1.lambda_handler",
                  "id": "eotb-workmail-otp-rule-v1",
                  "image_config": [],
                  "image_uri": "",
                  "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1/invocations",
                  "kms_key_arn": "",
                  "last_modified": "2024-08-26T10:08:20.030+0000",
                  "layers": [],
                  "memory_size": 254,
                  "package_type": "Zip",
                  "publish": false,
                  "qualified_arn": "arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST",
                  "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:901872380504:function:eotb-workmail-otp-rule-v1:$LATEST/invocations",
                  "replace_security_groups_on_destroy": null,
                  "replacement_security_group_ids": null,
                  "reserved_concurrent_executions": -1,
                  "role": "arn:aws:iam::901872380504:role/eotb-WorkMailFlowsRead",
                  "runtime": "python3.9",
                  "s3_bucket": null,
                  "s3_key": null,
                  "s3_object_version": null,
                  "signing_job_arn": "",
                  "signing_profile_version_arn": "",
                  "skip_destroy": false,
                  "snap_start": [],
                  "source_code_hash": "oMKPbAZ3vNBX0rbvjS9eVyYeYf9fFkeVIXqnnGQcp94=",
                  "source_code_size": 7594,
                  "tags": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function"
                  },
                  "tags_all": {
                    "CreatedBy": "terraform",
                    "ModuleName": "lambda-function",
                    "Prefix": "eotb",
                    "Project": "Email OTP Bridge"
                  },
                  "timeout": 60,
                  "timeouts": null,
                  "tracing_config": [
                    {
                      "mode": "Active"
                    }
                  ],
                  "version": "$LATEST",
                  "vpc_config": []
                },
                "sensitive_values": {
                  "architectures": [
                    false
                  ],
                  "dead_letter_config": [],
                  "environment": [
                    {
                      "variables": {}
                    }
                  ],
                  "ephemeral_storage": [
                    {}
                  ],
                  "file_system_config": [],
                  "image_config": [],
                  "layers": [],
                  "snap_start": [],
                  "tags": {},
                  "tags_all": {},
                  "tracing_config": [
                    {}
                  ],
                  "vpc_config": []
                },
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.lambda.aws_cloudwatch_log_group.main"
                ]
              },
              {
                "address": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_permission.main[\"AllowExecutionWorkmail\"]",
                "mode": "managed",
                "type": "aws_lambda_permission",
                "name": "main",
                "index": "AllowExecutionWorkmail",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "action": "lambda:InvokeFunction",
                  "event_source_token": null,
                  "function_name": "eotb-workmail-otp-rule-v1",
                  "function_url_auth_type": null,
                  "id": "eotb-AllowExecutionWorkmail",
                  "principal": "workmail.eu-west-1.amazonaws.com",
                  "principal_org_id": null,
                  "qualifier": "",
                  "source_account": null,
                  "source_arn": "arn:aws:workmail:eu-west-1:901872380504:organization/m-082f7c51940642c088f316c79b86ca88",
                  "statement_id": "eotb-AllowExecutionWorkmail",
                  "statement_id_prefix": ""
                },
                "sensitive_values": {},
                "depends_on": [
                  "module.aim_policy.aws_iam_policy.main",
                  "module.aim_role_policy.aws_iam_role.main",
                  "module.api_gateway_rest.aws_api_gateway_deployment.main",
                  "module.api_gateway_rest.aws_api_gateway_rest_api.main",
                  "module.lambda.aws_cloudwatch_log_group.main",
                  "module.lambda.aws_lambda_function.main"
                ]
              }
            ],
            "address": "module.lambda[\"workmail-otp-rule-v1\"]"
          }
        ]
      }
    }
  },
  "configuration": {
    "provider_config": {
      "aws": {
        "name": "aws",
        "full_name": "registry.terraform.io/hashicorp/aws",
        "version_constraint": "~\u003e 5.19.0",
        "expressions": {
          "default_tags": [
            {
              "tags": {
                "references": [
                  "var.project_name",
                  "var.project_prefix",
                  "var.tags"
                ]
              }
            }
          ],
          "region": {
            "references": [
              "var.region"
            ]
          }
        }
      }
    },
    "root_module": {
      "module_calls": {
        "aim_policy": {
          "source": "./modules/iam-policy",
          "expressions": {
            "description": {
              "references": [
                "each.value.description",
                "each.value"
              ]
            },
            "name": {
              "references": [
                "each.key"
              ]
            },
            "policy": {
              "references": [
                "each.value.policy",
                "each.value"
              ]
            },
            "prefix": {
              "references": [
                "var.project_prefix"
              ]
            }
          },
          "for_each_expression": {
            "references": [
              "local.iam_policies"
            ]
          },
          "module": {
            "outputs": {
              "policy_arn": {
                "expression": {
                  "references": [
                    "aws_iam_policy.main.arn",
                    "aws_iam_policy.main"
                  ]
                }
              }
            },
            "resources": [
              {
                "address": "aws_iam_policy.main",
                "mode": "managed",
                "type": "aws_iam_policy",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "description": {
                    "references": [
                      "var.description"
                    ]
                  },
                  "name": {
                    "references": [
                      "var.prefix",
                      "var.name"
                    ]
                  },
                  "policy": {
                    "references": [
                      "var.policy"
                    ]
                  }
                },
                "schema_version": 0
              }
            ],
            "variables": {
              "description": {
                "description": "Description for the Role resource"
              },
              "name": {
                "description": "Name for the Role resource"
              },
              "policy": {
                "description": "Policy document in json format"
              },
              "prefix": {
                "description": "Prefix for the Role resource"
              },
              "tags": {
                "default": {},
                "description": "Map of key/value metadata"
              }
            }
          }
        },
        "aim_role_policy": {
          "source": "./modules/iam-role-policy",
          "expressions": {
            "account_id": {
              "references": [
                "var.account_id"
              ]
            },
            "aim_attachment_role_policies": {
              "references": [
                "each.value.aim_attachment_role_policies",
                "each.value"
              ]
            },
            "assume_role_policy": {
              "references": [
                "each.value.assume_role_policy",
                "each.value"
              ]
            },
            "description": {
              "references": [
                "each.value.description",
                "each.value"
              ]
            },
            "name": {
              "references": [
                "each.key"
              ]
            },
            "prefix": {
              "references": [
                "var.project_prefix"
              ]
            }
          },
          "for_each_expression": {
            "references": [
              "local.role_policies"
            ]
          },
          "module": {
            "outputs": {
              "iam_role_arn": {
                "expression": {
                  "references": [
                    "aws_iam_role.main.arn",
                    "aws_iam_role.main"
                  ]
                }
              }
            },
            "resources": [
              {
                "address": "aws_iam_role.main",
                "mode": "managed",
                "type": "aws_iam_role",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "assume_role_policy": {
                    "references": [
                      "var.assume_role_policy"
                    ]
                  },
                  "description": {
                    "references": [
                      "var.description"
                    ]
                  },
                  "name": {
                    "references": [
                      "var.prefix",
                      "var.name"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_iam_role_policy.main",
                "mode": "managed",
                "type": "aws_iam_role_policy",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.prefix",
                      "var.name",
                      "each.key"
                    ]
                  },
                  "policy": {
                    "references": [
                      "each.value.policy",
                      "each.value"
                    ]
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.main.name",
                      "aws_iam_role.main"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "var.aim_role_policies"
                  ]
                }
              },
              {
                "address": "aws_iam_role_policy_attachment.main",
                "mode": "managed",
                "type": "aws_iam_role_policy_attachment",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "policy_arn": {
                    "references": [
                      "var.account_id",
                      "var.prefix",
                      "each.value"
                    ]
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.main.name",
                      "aws_iam_role.main"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "var.aim_attachment_role_policies"
                  ]
                }
              }
            ],
            "variables": {
              "account_id": {
                "description": "AWS account ID"
              },
              "aim_attachment_role_policies": {
                "default": [],
                "description": "IAM policy ARN for attaching to the role"
              },
              "aim_role_policies": {
                "default": {},
                "description": "IAM policy document in JSON format for the role"
              },
              "assume_role_policy": {
                "description": "Assume policy document in JSON format for the assume role policy"
              },
              "description": {
                "description": "Description for the Role resource"
              },
              "name": {
                "description": "Name for the Role resource"
              },
              "prefix": {
                "description": "Prefix for the Role resource"
              },
              "tags": {
                "default": {},
                "description": "Map of key/value metadata"
              }
            }
          },
          "depends_on": [
            "module.aim_policy"
          ]
        },
        "api_gateway_rest": {
          "source": "./modules/api-gateway-rest",
          "expressions": {
            "api_body": {
              "references": [
                "each.value.api_body",
                "each.value"
              ]
            },
            "custom_domain": {
              "references": [
                "each.value.custom_domain",
                "each.value"
              ]
            },
            "description": {
              "references": [
                "each.value.description",
                "each.value"
              ]
            },
            "disable_execute_api_endpoint": {
              "references": [
                "each.value.disable_execute_api_endpoint",
                "each.value"
              ]
            },
            "name": {
              "references": [
                "each.key"
              ]
            },
            "prefix": {
              "references": [
                "var.project_prefix"
              ]
            },
            "quota": {
              "references": [
                "each.value.quota",
                "each.value"
              ]
            }
          },
          "for_each_expression": {
            "references": [
              "local.api_gw_configs"
            ]
          },
          "module": {
            "outputs": {
              "api_stage": {
                "expression": {
                  "references": [
                    "aws_api_gateway_stage.main.stage_name",
                    "aws_api_gateway_stage.main"
                  ]
                }
              },
              "api_stage_arn": {
                "expression": {
                  "references": [
                    "aws_api_gateway_stage.main.arn",
                    "aws_api_gateway_stage.main"
                  ]
                }
              },
              "api_stage_id": {
                "expression": {
                  "references": [
                    "aws_api_gateway_stage.main.id",
                    "aws_api_gateway_stage.main"
                  ]
                }
              },
              "api_url": {
                "expression": {
                  "references": [
                    "aws_api_gateway_deployment.main.invoke_url",
                    "aws_api_gateway_deployment.main",
                    "aws_api_gateway_stage.main.stage_name",
                    "aws_api_gateway_stage.main"
                  ]
                }
              },
              "execution_arn": {
                "expression": {
                  "references": [
                    "aws_api_gateway_deployment.main.execution_arn",
                    "aws_api_gateway_deployment.main"
                  ]
                }
              },
              "invoke_url": {
                "expression": {
                  "references": [
                    "aws_api_gateway_deployment.main.invoke_url",
                    "aws_api_gateway_deployment.main"
                  ]
                }
              },
              "rest_api_id": {
                "expression": {
                  "references": [
                    "aws_api_gateway_rest_api.main.id",
                    "aws_api_gateway_rest_api.main"
                  ]
                }
              }
            },
            "resources": [
              {
                "address": "aws_api_gateway_api_key.main",
                "mode": "managed",
                "type": "aws_api_gateway_api_key",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "local.prefixed_name"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_api_key"
                  ]
                }
              },
              {
                "address": "aws_api_gateway_base_path_mapping.main",
                "mode": "managed",
                "type": "aws_api_gateway_base_path_mapping",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "api_id": {
                    "references": [
                      "aws_api_gateway_rest_api.main.id",
                      "aws_api_gateway_rest_api.main"
                    ]
                  },
                  "domain_name": {
                    "references": [
                      "aws_api_gateway_domain_name.main[\"singleton\"].domain_name",
                      "aws_api_gateway_domain_name.main[\"singleton\"]",
                      "aws_api_gateway_domain_name.main"
                    ]
                  },
                  "stage_name": {
                    "references": [
                      "aws_api_gateway_stage.main.stage_name",
                      "aws_api_gateway_stage.main"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_base_path_mapping"
                  ]
                }
              },
              {
                "address": "aws_api_gateway_deployment.main",
                "mode": "managed",
                "type": "aws_api_gateway_deployment",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "rest_api_id": {
                    "references": [
                      "aws_api_gateway_rest_api.main.id",
                      "aws_api_gateway_rest_api.main"
                    ]
                  },
                  "triggers": {
                    "references": [
                      "aws_api_gateway_rest_api.main.body",
                      "aws_api_gateway_rest_api.main"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_api_gateway_domain_name.main",
                "mode": "managed",
                "type": "aws_api_gateway_domain_name",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "domain_name": {
                    "references": [
                      "var.custom_domain.domain_name",
                      "var.custom_domain"
                    ]
                  },
                  "endpoint_configuration": [
                    {
                      "types": {
                        "constant_value": [
                          "REGIONAL"
                        ]
                      }
                    }
                  ],
                  "regional_certificate_arn": {
                    "references": [
                      "var.custom_domain.acm_certificate_arn",
                      "var.custom_domain"
                    ]
                  },
                  "security_policy": {
                    "references": [
                      "var.custom_domain.security_policy",
                      "var.custom_domain"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_custom_domain_name"
                  ]
                }
              },
              {
                "address": "aws_api_gateway_rest_api.main",
                "mode": "managed",
                "type": "aws_api_gateway_rest_api",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "body": {
                    "references": [
                      "var.api_body"
                    ]
                  },
                  "disable_execute_api_endpoint": {
                    "references": [
                      "var.disable_execute_api_endpoint"
                    ]
                  },
                  "endpoint_configuration": [
                    {
                      "types": {
                        "constant_value": [
                          "REGIONAL"
                        ]
                      }
                    }
                  ],
                  "name": {
                    "references": [
                      "local.prefixed_name"
                    ]
                  },
                  "put_rest_api_mode": {
                    "constant_value": "merge"
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_api_gateway_stage.main",
                "mode": "managed",
                "type": "aws_api_gateway_stage",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "deployment_id": {
                    "references": [
                      "aws_api_gateway_deployment.main.id",
                      "aws_api_gateway_deployment.main"
                    ]
                  },
                  "rest_api_id": {
                    "references": [
                      "aws_api_gateway_rest_api.main.id",
                      "aws_api_gateway_rest_api.main"
                    ]
                  },
                  "stage_name": {
                    "references": [
                      "var.stage_name"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_api_gateway_usage_plan.main",
                "mode": "managed",
                "type": "aws_api_gateway_usage_plan",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "api_stages": [
                    {
                      "api_id": {
                        "references": [
                          "aws_api_gateway_rest_api.main.id",
                          "aws_api_gateway_rest_api.main"
                        ]
                      },
                      "stage": {
                        "references": [
                          "aws_api_gateway_stage.main.stage_name",
                          "aws_api_gateway_stage.main"
                        ]
                      }
                    }
                  ],
                  "description": {
                    "references": [
                      "var.description"
                    ]
                  },
                  "name": {
                    "references": [
                      "local.prefixed_name"
                    ]
                  },
                  "product_code": {
                    "references": [
                      "var.quota.product_code",
                      "var.quota"
                    ]
                  },
                  "quota_settings": [
                    {
                      "limit": {
                        "references": [
                          "var.quota.quota_limit",
                          "var.quota"
                        ]
                      },
                      "offset": {
                        "references": [
                          "var.quota.quota_offset",
                          "var.quota"
                        ]
                      },
                      "period": {
                        "references": [
                          "var.quota.quota_period",
                          "var.quota"
                        ]
                      }
                    }
                  ],
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  },
                  "throttle_settings": [
                    {
                      "burst_limit": {
                        "references": [
                          "var.quota.throttle_burst_limit",
                          "var.quota"
                        ]
                      },
                      "rate_limit": {
                        "references": [
                          "var.quota.throttle_rate_limit",
                          "var.quota"
                        ]
                      }
                    }
                  ]
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_quota"
                  ]
                }
              },
              {
                "address": "aws_api_gateway_usage_plan_key.main",
                "mode": "managed",
                "type": "aws_api_gateway_usage_plan_key",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "key_id": {
                    "references": [
                      "aws_api_gateway_api_key.main[\"singleton\"].id",
                      "aws_api_gateway_api_key.main[\"singleton\"]",
                      "aws_api_gateway_api_key.main"
                    ]
                  },
                  "key_type": {
                    "constant_value": "API_KEY"
                  },
                  "usage_plan_id": {
                    "references": [
                      "aws_api_gateway_usage_plan.main[\"singleton\"].id",
                      "aws_api_gateway_usage_plan.main[\"singleton\"]",
                      "aws_api_gateway_usage_plan.main"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_api_key"
                  ]
                }
              },
              {
                "address": "aws_cloudwatch_log_group.main",
                "mode": "managed",
                "type": "aws_cloudwatch_log_group",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "local.prefixed_name",
                      "aws_api_gateway_rest_api.main.id",
                      "aws_api_gateway_rest_api.main",
                      "var.stage_name"
                    ]
                  },
                  "retention_in_days": {
                    "references": [
                      "var.logging.retention_in_days",
                      "var.logging"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_logging"
                  ]
                }
              },
              {
                "address": "aws_route53_record.main",
                "mode": "managed",
                "type": "aws_route53_record",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "alias": [
                    {
                      "evaluate_target_health": {
                        "constant_value": true
                      },
                      "name": {
                        "references": [
                          "aws_api_gateway_domain_name.main[\"singleton\"].regional_domain_name",
                          "aws_api_gateway_domain_name.main[\"singleton\"]",
                          "aws_api_gateway_domain_name.main"
                        ]
                      },
                      "zone_id": {
                        "references": [
                          "aws_api_gateway_domain_name.main[\"singleton\"].regional_zone_id",
                          "aws_api_gateway_domain_name.main[\"singleton\"]",
                          "aws_api_gateway_domain_name.main"
                        ]
                      }
                    }
                  ],
                  "name": {
                    "references": [
                      "aws_api_gateway_domain_name.main[\"singleton\"].domain_name",
                      "aws_api_gateway_domain_name.main[\"singleton\"]",
                      "aws_api_gateway_domain_name.main"
                    ]
                  },
                  "type": {
                    "constant_value": "A"
                  },
                  "zone_id": {
                    "references": [
                      "var.custom_domain.zone_id",
                      "var.custom_domain"
                    ]
                  }
                },
                "schema_version": 2,
                "for_each_expression": {
                  "references": [
                    "local.enable_custom_domain_name"
                  ]
                }
              },
              {
                "address": "aws_secretsmanager_secret.main",
                "mode": "managed",
                "type": "aws_secretsmanager_secret",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "description": {
                    "references": [
                      "var.description"
                    ]
                  },
                  "name": {
                    "references": [
                      "local.prefixed_name"
                    ]
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_api_key"
                  ]
                }
              },
              {
                "address": "aws_secretsmanager_secret_version.main",
                "mode": "managed",
                "type": "aws_secretsmanager_secret_version",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "secret_id": {
                    "references": [
                      "aws_secretsmanager_secret.main[\"singleton\"].id",
                      "aws_secretsmanager_secret.main[\"singleton\"]",
                      "aws_secretsmanager_secret.main"
                    ]
                  },
                  "secret_string": {
                    "references": [
                      "aws_api_gateway_usage_plan_key.main[\"singleton\"].value",
                      "aws_api_gateway_usage_plan_key.main[\"singleton\"]",
                      "aws_api_gateway_usage_plan_key.main"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "local.enable_api_key"
                  ]
                }
              },
              {
                "address": "data.aws_caller_identity.current",
                "mode": "data",
                "type": "aws_caller_identity",
                "name": "current",
                "provider_config_key": "aws",
                "schema_version": 0
              },
              {
                "address": "data.aws_region.current",
                "mode": "data",
                "type": "aws_region",
                "name": "current",
                "provider_config_key": "aws",
                "schema_version": 0
              }
            ],
            "variables": {
              "api_body": {
                "description": "Body for REST API"
              },
              "custom_domain": {
                "default": null,
                "description": "Adds a custom domain"
              },
              "description": {
                "description": "Description of what your Lambda Function does"
              },
              "disable_execute_api_endpoint": {
                "default": false,
                "description": "Disable the default REST API endpoint"
              },
              "logging": {
                "default": null,
                "description": "Adds cloudwatch logging"
              },
              "name": {
                "description": "Unique name for your Lambda Function"
              },
              "prefix": {
                "description": "Prefix for the Role resource"
              },
              "quota": {
                "default": null,
                "description": "Api Gateway quota settings"
              },
              "stage_name": {
                "default": "api",
                "description": "Api Gateway stage name"
              },
              "tags": {
                "default": {},
                "description": "Map of tags to assign to the object."
              }
            }
          }
        },
        "lambda": {
          "source": "./modules/lambda-function",
          "expressions": {
            "artefact_path": {
              "references": [
                "local.lambda_functions_path",
                "each.value.artefact_file",
                "each.value"
              ]
            },
            "description": {
              "references": [
                "each.value.description",
                "each.value"
              ]
            },
            "environment_variables": {
              "references": [
                "local.default_environment",
                "each.value.environment",
                "each.value"
              ]
            },
            "handler": {
              "references": [
                "each.value.handler",
                "each.value"
              ]
            },
            "layers": {
              "constant_value": []
            },
            "name": {
              "references": [
                "each.key"
              ]
            },
            "permissions": {
              "references": [
                "local.lambdas_permissions",
                "each.key"
              ]
            },
            "prefix": {
              "references": [
                "var.project_prefix"
              ]
            },
            "role_arn": {
              "references": [
                "each.value.role_arn",
                "each.value"
              ]
            },
            "runtime": {
              "constant_value": "python3.9"
            }
          },
          "for_each_expression": {
            "references": [
              "local.lambda_functions"
            ]
          },
          "module": {
            "outputs": {
              "invoke_arn": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.invoke_arn",
                    "aws_lambda_function.main"
                  ]
                }
              },
              "lambda_arn": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.arn",
                    "aws_lambda_function.main"
                  ]
                }
              },
              "lambda_function_name": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.function_name",
                    "aws_lambda_function.main"
                  ]
                }
              },
              "lambda_function_version": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.version",
                    "aws_lambda_function.main"
                  ]
                }
              },
              "lambda_id": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.id",
                    "aws_lambda_function.main"
                  ]
                }
              },
              "qualified_arn": {
                "expression": {
                  "references": [
                    "aws_lambda_function.main.qualified_arn",
                    "aws_lambda_function.main"
                  ]
                }
              }
            },
            "resources": [
              {
                "address": "aws_cloudwatch_log_group.main",
                "mode": "managed",
                "type": "aws_cloudwatch_log_group",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.prefix",
                      "local.cloudwatch_log_group_name"
                    ]
                  },
                  "retention_in_days": {
                    "constant_value": 7
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_lambda_function.main",
                "mode": "managed",
                "type": "aws_lambda_function",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "description": {
                    "references": [
                      "var.description"
                    ]
                  },
                  "environment": [
                    {
                      "variables": {
                        "references": [
                          "var.environment_variables"
                        ]
                      }
                    }
                  ],
                  "filename": {
                    "references": [
                      "var.artefact_path"
                    ]
                  },
                  "function_name": {
                    "references": [
                      "var.prefix",
                      "var.name"
                    ]
                  },
                  "handler": {
                    "references": [
                      "var.handler"
                    ]
                  },
                  "layers": {
                    "references": [
                      "var.layers"
                    ]
                  },
                  "memory_size": {
                    "references": [
                      "var.memory_size"
                    ]
                  },
                  "publish": {
                    "references": [
                      "var.publish"
                    ]
                  },
                  "reserved_concurrent_executions": {
                    "references": [
                      "var.concurrent_executions"
                    ]
                  },
                  "role": {
                    "references": [
                      "var.role_arn"
                    ]
                  },
                  "runtime": {
                    "references": [
                      "var.runtime"
                    ]
                  },
                  "source_code_hash": {
                    "references": [
                      "var.artefact_path"
                    ]
                  },
                  "tags": {
                    "references": [
                      "local.tags"
                    ]
                  },
                  "timeout": {
                    "references": [
                      "var.timeout_seconds"
                    ]
                  },
                  "tracing_config": [
                    {
                      "mode": {
                        "references": [
                          "var.tracing_mode"
                        ]
                      }
                    }
                  ]
                },
                "schema_version": 0,
                "depends_on": [
                  "aws_cloudwatch_log_group.main"
                ]
              },
              {
                "address": "aws_lambda_permission.main",
                "mode": "managed",
                "type": "aws_lambda_permission",
                "name": "main",
                "provider_config_key": "aws",
                "expressions": {
                  "action": {
                    "constant_value": "lambda:InvokeFunction"
                  },
                  "function_name": {
                    "references": [
                      "aws_lambda_function.main.function_name",
                      "aws_lambda_function.main"
                    ]
                  },
                  "principal": {
                    "references": [
                      "each.value.principal",
                      "each.value"
                    ]
                  },
                  "source_arn": {
                    "references": [
                      "each.value.source_arn",
                      "each.value"
                    ]
                  },
                  "statement_id": {
                    "references": [
                      "var.prefix",
                      "each.key"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "var.permissions"
                  ]
                }
              }
            ],
            "variables": {
              "artefact_path": {
                "description": "Path to the function's deployment package within the local filesystem"
              },
              "concurrent_executions": {
                "default": -1,
                "description": "0 disables lambda from being triggered and -1 removes any concurrency limitations"
              },
              "description": {
                "description": "Description of what your Lambda Function does"
              },
              "environment_variables": {
                "default": {},
                "description": "Lambda environment variables"
              },
              "handler": {
                "description": "Function entrypoint class/method in your code"
              },
              "layers": {
                "default": [],
                "description": "List of Lambda Layer Version ARNs (maximum of 5) to attach to your Lambda Function"
              },
              "memory_size": {
                "default": 254,
                "description": "Amount of memory in MB your Lambda Function can use at runtime"
              },
              "name": {
                "description": "Unique name for your Lambda Function"
              },
              "permissions": {
                "default": [],
                "description": "Adds lambda permissions"
              },
              "prefix": {
                "description": "Prefix for the Role resource"
              },
              "publish": {
                "default": false,
                "description": "Whether to publish creation/change as new Lambda Function Version"
              },
              "role_arn": {
                "description": "IAM Role ARN for the Lambda Function"
              },
              "runtime": {
                "default": "python3.9",
                "description": "Identifier of the function's runtime"
              },
              "tags": {
                "default": {},
                "description": "Map of tags to assign to the object."
              },
              "timeout_seconds": {
                "default": 60,
                "description": "Amount of time your Lambda Function has to run in seconds"
              },
              "tracing_mode": {
                "default": "Active",
                "description": "For Xray tracing"
              }
            }
          }
        }
      },
      "variables": {
        "account_id": {
          "description": "AWS account ID"
        },
        "project_name": {
          "description": "Project name"
        },
        "project_prefix": {
          "description": "Project prefix"
        },
        "region": {
          "description": "AWS Region value"
        },
        "tags": {
          "default": {},
          "description": "Map of tags to assign to the object."
        },
        "workmail_organization_id": {
          "description": "Workmail organization ID"
        }
      }
    }
  },
  "relevant_attributes": [
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_rest_api.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
      "attribute": [
        "stage_name"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "qualified_arn"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "function_name"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "qualified_arn"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "qualified_arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "version"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "qualified_arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "invoke_arn"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "invoke_arn"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "version"
      ]
    },
    {
      "resource": "module.aim_role_policy[\"WorkMailFlowsRead\"].aws_iam_role.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "version"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_deployment.main",
      "attribute": [
        "execution_arn"
      ]
    },
    {
      "resource": "module.aim_policy[\"WorkMailFlowsRead\"].aws_iam_policy.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "invoke_arn"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "invoke_arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "function_name"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.lambda[\"health-status-v1\"].aws_lambda_function.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1\"].aws_lambda_function.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_stage.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "function_name"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].aws_lambda_function.main",
      "attribute": [
        "function_name"
      ]
    },
    {
      "resource": "module.lambda[\"api-read-otp-v1\"].aws_lambda_function.main",
      "attribute": [
        "version"
      ]
    },
    {
      "resource": "module.api_gateway_rest[\"backend-api\"].aws_api_gateway_deployment.main",
      "attribute": [
        "invoke_url"
      ]
    }
  ],
  "checks": [
    {
      "address": {
        "kind": "var",
        "module": "module.api_gateway_rest",
        "name": "name",
        "to_display": "module.api_gateway_rest.var.name"
      },
      "status": "pass",
      "instances": [
        {
          "address": {
            "module": "module.api_gateway_rest[\"backend-api\"]",
            "to_display": "module.api_gateway_rest[\"backend-api\"].var.name"
          },
          "status": "pass"
        }
      ]
    },
    {
      "address": {
        "kind": "var",
        "module": "module.lambda",
        "name": "name",
        "to_display": "module.lambda.var.name"
      },
      "status": "pass",
      "instances": [
        {
          "address": {
            "module": "module.lambda[\"api-read-otp-v1\"]",
            "to_display": "module.lambda[\"api-read-otp-v1\"].var.name"
          },
          "status": "pass"
        },
        {
          "address": {
            "module": "module.lambda[\"health-status-v1\"]",
            "to_display": "module.lambda[\"health-status-v1\"].var.name"
          },
          "status": "pass"
        },
        {
          "address": {
            "module": "module.lambda[\"workmail-otp-rule-v1\"]",
            "to_display": "module.lambda[\"workmail-otp-rule-v1\"].var.name"
          },
          "status": "pass"
        },
        {
          "address": {
            "module": "module.lambda[\"workmail-otp-rule-v1-onlytest\"]",
            "to_display": "module.lambda[\"workmail-otp-rule-v1-onlytest\"].var.name"
          },
          "status": "pass"
        }
      ]
    }
  ],
  "timestamp": "2024-08-26T19:15:56Z",
  "errored": false
}
